(this["webpackJsonptaxi-dashboard"]=this["webpackJsonptaxi-dashboard"]||[]).push([[0],{214:function(e,t,a){},215:function(e,t,a){},242:function(e,t,a){},251:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),r=a(34),o=a.n(r),i=(a(214),a(6)),s=a(62),l=a(65),d=(a(215),a(369)),j=a(362),b=a(370),u=a(371),x=a(372),O=a(168),h=a.n(O),p=a(352),f=a(195),m=a(23),v=a(53),g=a(351),w=a(2);function y(){var e=n.useState(!0),t=Object(i.a)(e,2),a=t[0],c=(t[1],n.useState(null)),r=Object(i.a)(c,2),o=r[0],s=r[1],l=Object(m.o)(),O=Object(v.b)(),y=Object(g.a)([]),k=Object(i.a)(y,3),S=(k[0],k[1],k[2]);return Object(w.jsx)(j.a,{sx:{flexGrow:1},children:Object(w.jsx)(d.a,{position:"static",sx:{marginTop:"0px"},children:Object(w.jsxs)(b.a,{sx:{backgroundColor:"black"},children:[Object(w.jsx)(u.a,{variant:"h5",component:"div",sx:{flexGrow:1,marginLeft:"2rem"},children:"BookmyTrip"}),a&&Object(w.jsxs)("div",{children:[Object(w.jsx)(x.a,{size:"large","aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){s(e.currentTarget)},color:"inherit",children:Object(w.jsx)(h.a,{})}),Object(w.jsx)(f.a,{id:"menu-appbar",anchorEl:o,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(o),onClose:function(){s(null)},children:Object(w.jsx)(p.a,{onClick:function(){O({type:"ADMIN_LOGOUT",payload:{email:null}}),S(["jwt","refreshToken"]),l("/admin/login")},children:"Logout"})})]})]})})})}var k=function(e){var t=e.props,a=Object(n.useState)(!1),c=Object(i.a)(a,2),r=c[0],o=c[1],d=[{path:"/admin",name:"DashBoard",icon:Object(w.jsx)(s.d,{})},{path:"/admin/users",name:"users",icon:Object(w.jsx)(s.e,{})},{path:"/admin/hotels/approve",name:"Approve hotels",icon:Object(w.jsx)(s.f,{})},{path:"/admin/hotels",name:"Hotels",icon:Object(w.jsx)(s.d,{})},{path:"/admin/bookings",name:"bookings",icon:Object(w.jsx)(s.b,{})}];return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(y,{}),Object(w.jsxs)("div",{className:"container",children:[Object(w.jsxs)("div",{style:{width:r?"250px":"50px"},className:"sidebar",children:[Object(w.jsxs)("div",{className:"top_section",children:[Object(w.jsx)("h5",{style:{display:r?"block":"none"},className:"logo",children:"Admin"}),Object(w.jsx)("div",{style:{marginLeft:r?"10px":"0px"},className:"bars",children:Object(w.jsx)(s.a,{onClick:function(){return o(!r)}})})]}),d.map((function(e,t){return e.callback?Object(w.jsxs)("div",{onClick:e.callback,className:"link",children:[Object(w.jsx)("div",{className:"icon",children:e.icon}),Object(w.jsx)("div",{style:{display:r?"block":"none"},className:"link_text",children:e.name})]},t):Object(w.jsxs)(l.b,{to:e.path,className:"link",children:[Object(w.jsx)("div",{className:"icon",children:e.icon}),Object(w.jsx)("div",{style:{display:r?"block":"none"},className:"link_text",children:e.name})]},t)}))]}),Object(w.jsx)("main",{children:t||""})]})]})},S=a(4),C=a(22),E=a(345),T=a(358),z=a(359),B=a(348),D=a(337),A=a(346);var I=function(e){var t=e.formLabel,a=e.label,n=e.name,c=e.type,r=e.helperText,o=e.error,i=e.callback,s=e.onFocusCallback;return Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)(j.a,{sx:{display:"flex",flexDirection:"column",marginTop:"18px",marginBottom:"15px"},children:[Object(w.jsx)(D.a,{children:t}),Object(w.jsx)(A.a,{id:"outlined-basic",label:a,type:c,variant:"outlined",name:n,helperText:r,error:o,onChange:i,onFocus:s})]})})},W="http://localhost:5000/admin",N="".concat(W,"/login"),F="".concat(W,"/forgot/password"),L="".concat(W,"/reset/password"),_=("".concat(W,"/test"),"".concat(W,"/refresh"),"".concat(W,"/users")),P="".concat(W,"/user/block"),H="".concat(W,"/hotel/approve"),R="".concat(W,"/hotel/accept"),G="".concat(W,"/hotel/delete"),M="".concat(W,"/hotel/data"),U="".concat(W,"/get-full/details"),q="".concat(W,"/block/hotel"),J="".concat(W,"/get/hotel"),K="".concat(W,"/get/all/booking"),V="".concat(W,"/get/all/users"),Y="".concat(W,"/get/all/bookings"),X=a(349),Q=a(347);var Z=function(e){var t=e.text,a=e.color,c=Object(n.useState)({snackbarOpen:!1}),r=Object(i.a)(c,2),o=r[0],s=r[1];return Object(n.useEffect)((function(){s({snackbarOpen:!0})}),[]),Object(w.jsx)("div",{children:Object(w.jsx)(X.a,{open:o.snackbarOpen,autoHideDuration:6e3,anchorOrigin:{vertical:"top",horizontal:"center"},onClose:function(){return s({snackbarOpen:!1})},children:Object(w.jsx)(Q.a,{severity:a,elevation:6,variant:"filled",children:t})})})};var $=function(){var e=c.a.useState(!1),t=Object(i.a)(e,2),a=t[0],r=t[1],o=function(){return r(!1)},s=Object(n.useState)(!1),l=Object(i.a)(s,2),d=l[0],b=l[1],x=Object(n.useState)(!1),O=Object(i.a)(x,2),h=O[0],p=O[1],f=Object(v.b)(),g=Object(m.o)(),y=Object(n.useState)({email:"",password:""}),k=Object(i.a)(y,2),D=k[0],A=k[1],W=Object(n.useState)({emailError:"",passwordError:""}),L=Object(i.a)(W,2),_=L[0],P=L[1],H=Object(n.useState)(""),R=Object(i.a)(H,2),G=R[0],M=R[1],U=function(e){A(Object(C.a)(Object(C.a)({},D),{},Object(S.a)({},e.target.name,e.target.value)))},q=function(){var e,t=D.email,a=D.password;return""===t&&""===a?(P((e={},Object(S.a)(e,"emailError","email is required"),Object(S.a)(e,"passwordError","password is required"),e)),!1):""===t?(P(Object(S.a)({},"emailError","email is required")),!1):""!==a||(P(Object(S.a)({},"passwordError","password is required")),!1)};return Object(w.jsx)(j.a,{sx:{display:"flex",flexDirection:"row",justifyContent:"center",padding:"8%"},children:Object(w.jsx)(j.a,{children:Object(w.jsx)(T.a,{children:Object(w.jsxs)(T.a,{sm:10,md:6,sx:{boxShadow:3,maxHeight:"500px",maxWidth:"500px",padding:"4rem"},children:[Object(w.jsx)(u.a,{sx:{textAlign:"center",fontSize:"32px",fontWeight:"bolder",marginBottom:"15px"},children:"bookMyTrip"}),Object(w.jsxs)("form",{onSubmit:function(e){var t=D.email,a=D.password;e.preventDefault(),q()&&E.a.post(N,{email:t,password:a},{withCredentials:!0}).then((function(e){console.log(e.data),e.data.status?(f({type:"ADMIN_LOGIN",payload:{email:e.data.user}}),g("/admin")):0==e.data.passwordStatus?P(Object(C.a)(Object(C.a)({},_),{},Object(S.a)({},"passwordError",e.data.msg))):P(Object(C.a)(Object(C.a)({},_),{},Object(S.a)({},"emailError",e.data.msg)))}))},children:[Object(w.jsx)(I,{formLabel:"",label:"email",name:"email",type:"email",helperText:_.emailError?_.emailError:"",error:!!_.emailError,callback:function(e){return U(e)},onFocusCallback:function(){return P(Object(C.a)(Object(C.a)({},_),{},Object(S.a)({},"emailError","")))}}),Object(w.jsx)(I,{FormLabel:"password",label:"password",name:"password",type:"password",helperText:_.passwordError?_.passwordError:"",error:!!_.passwordError,callback:function(e){return U(e)},onFocusCallback:function(){return P(Object(C.a)(Object(C.a)({},_),{},Object(S.a)({},"passwordError","")))}}),Object(w.jsx)(j.a,{sx:{display:"flex",justifyContent:"center",cursor:"pointer"},children:Object(w.jsx)(z.a,{type:"submit",variant:"outlined",children:"Login"})}),Object(w.jsxs)(u.a,{sx:{fontSize:"12px",textAlign:"center",marginTop:"15px",color:"blue",cursor:"pointer"},children:["forgot password ",Object(w.jsx)("span",{onClick:function(){return r(!0)},children:"click here"})]})]}),d&&Object(w.jsx)(Z,{text:"Reset link send successfully to your mail",color:"success"}),h&&Object(w.jsx)(Z,{text:"please enter registered email",color:"error"}),Object(w.jsx)(B.a,{open:a,onClose:o,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:Object(w.jsx)(j.a,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"0px solid #fff",boxShadow:24,p:4},children:Object(w.jsxs)("form",{onSubmit:function(e){e.preventDefault(),(""!==G||(P(Object(S.a)({},"emailError","email is required")),0))&&E.a.post(F,{forgotEmail:G}).then((function(e){console.log(e),e.data.status?(b(!0),o()):p(!0)}))},children:[Object(w.jsx)(u.a,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Enter registerd email"}),Object(w.jsx)(I,{formLabel:"",label:"email",name:"forgotEmail",type:"email",helperText:_.emailError?_.emailError:"",error:!!_.emailError,callback:function(e){return function(e){M(e.target.value)}(e)}}),Object(w.jsx)(j.a,{sx:{display:"flex",justifyContent:"center"},children:Object(w.jsx)(z.a,{type:"submit",variant:"contained",children:"submit"})})]})})})]})})})})};var ee=function(){return Object(w.jsx)("div",{children:"ForgotPassword"})},te=a(20),ae=a(30),ne=a(357),ce=a(171),re=a(173),oe=a(172),ie=a(123),se=a(36);var le=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1];Object(n.useEffect)((function(){E.a.get(V).then((function(e){var t,a={};null===(t=e.data)||void 0===t||t.forEach((function(e){var t=new Date(e.createdAt).toLocaleDateString();a[t]=a[t]?a[t]+1:1})),c(a)})).catch((function(e){return console.log(e)}))}),[]),se.e.register(se.d,se.i,se.b,se.n,se.o,se.g);var r={labels:Object.keys(a),datasets:[{label:"Number of Users Joined",data:Object.values(a),backgroundColor:"#537188"}],scales:{x:{type:"category"}}};return Object(w.jsxs)("div",{children:[Object(w.jsx)("h2",{children:"User Count by Date"}),Object(w.jsx)(ie.a,{options:{responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:"Users"}}},data:r})]})};var de=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1];Object(n.useEffect)((function(){E.a.get(Y).then((function(e){var t,a,n={};null===(t=e.data)||void 0===t||null===(a=t.data)||void 0===a||a.forEach((function(e){console.log(e);var t=new Date(e.bookedDate).toLocaleDateString();n[t]=n[t]?n[t]+1:1})),c(n)})).catch((function(e){return console.log(e)}))}),[]),se.e.register(se.d,se.i,se.b,se.n,se.o,se.g);var r={labels:Object.keys(a),datasets:[{label:"Bookings by date",data:Object.values(a),backgroundColor:"#B04759"}],scales:{x:{type:"category"}}};return Object(w.jsxs)("div",{children:[Object(w.jsx)("h2",{children:"Bookings by date"}),Object(w.jsx)(ie.a,{options:{responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:"Post"}}},data:r})]})};var je=function(){return Object(w.jsxs)(j.a,{display:"flex",p:5,gap:2,justifyContent:"space-between",children:[Object(w.jsx)(ne.a,{sx:{width:"500px"},children:Object(w.jsx)(le,{})}),Object(w.jsx)(ne.a,{sx:{width:"500px"},children:Object(w.jsx)(de,{})})]})};var be=function(){var e=Object(n.useState)(),t=Object(i.a)(e,2),a=(t[0],t[1],Object(n.useState)()),c=Object(i.a)(a,2),r=c[0],o=c[1],l=Object(n.useState)(),d=Object(i.a)(l,2),b=d[0],x=d[1];Object(n.useEffect)((function(){O(),h()}),[]);var O=function(){var e=Object(ae.a)(Object(te.a)().mark((function e(){var t,a;return Object(te.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.get(V);case 2:t=e.sent,a=t.data,x(a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(ae.a)(Object(te.a)().mark((function e(){var t,a;return Object(te.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.get(Y);case 2:t=e.sent,a=t.data,o(a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(T.a,{container:!0,alignItems:"center",justifyContent:"center",p:2,children:Object(w.jsxs)(j.a,{sx:{padding:"10px",display:"flex",gap:"1rem"},children:[Object(w.jsx)(T.a,{item:!0,xs:8,md:3,children:Object(w.jsxs)(ne.a,{elevation:10,sx:{display:"flex",width:"15rem",height:"10rem",alignItems:"center",justifyContent:"center"},children:[Object(w.jsx)("div",{children:Object(w.jsx)(ce.a,{size:40})}),Object(w.jsxs)("div",{style:{textAlign:"center",padding:"10%"},children:[Object(w.jsx)(u.a,{variant:"h6",color:"#537188",children:"Total Users"}),Object(w.jsx)(u.a,{variant:"h6",color:"#537188",children:b&&b.length})]})]})}),Object(w.jsx)(T.a,{item:!0,xs:8,md:3,children:Object(w.jsxs)(ne.a,{elevation:10,sx:{display:"flex",width:"15rem",height:"10rem",alignItems:"center",justifyContent:"center"},children:[Object(w.jsx)("div",{children:Object(w.jsx)(oe.a,{size:40})}),Object(w.jsxs)("div",{style:{textAlign:"center",padding:"10%"},children:[Object(w.jsx)(u.a,{variant:"h6",color:"#537188",children:"Booking count"}),Object(w.jsx)(u.a,{variant:"h6",color:"#537188",children:r&&(null===r||void 0===r?void 0:r.count)})]})]})}),Object(w.jsx)(T.a,{item:!0,xs:8,md:3,children:Object(w.jsxs)(ne.a,{elevation:10,sx:{display:"flex",width:"15rem",height:"10rem",alignItems:"center",justifyContent:"center"},children:[Object(w.jsx)("div",{children:Object(w.jsx)(s.c,{size:40})}),Object(w.jsxs)("div",{style:{textAlign:"center",padding:"10%"},children:[Object(w.jsx)(u.a,{variant:"h6",color:"#537188",children:"Total Amount"}),Object(w.jsx)(u.a,{variant:"h6",color:"#537188",children:r&&(null===r||void 0===r?void 0:r.total)})]})]})}),Object(w.jsx)(T.a,{item:!0,xs:8,md:3,children:Object(w.jsxs)(ne.a,{elevation:10,sx:{display:"flex",width:"15rem",height:"10rem",alignItems:"center",justifyContent:"center"},children:[Object(w.jsx)("div",{children:Object(w.jsx)(re.a,{size:40})}),Object(w.jsxs)("div",{style:{textAlign:"center",padding:"10%"},children:[Object(w.jsx)(u.a,{variant:"h6",color:"#537188",children:"Hotels"}),Object(w.jsx)(u.a,{variant:"h6",color:"#537188",children:r&&(null===r||void 0===r?void 0:r.hotelCount)})]})]})})]})}),Object(w.jsx)(T.a,{container:!0,spacing:4,columns:16,alignItems:"center",justifyContent:"center",p:2,children:Object(w.jsx)(je,{})})]})};var ue=function(){var e=Object(m.o)(),t=Object(n.useState)(!1),a=Object(i.a)(t,2),c=a[0],r=a[1],o=Object(m.q)(),s=o.id,l=o.token,d=Object(n.useState)({password:"",confirmPassword:""}),b=Object(i.a)(d,2),x=b[0],O=b[1],h=Object(n.useState)({passwordErr:"",confirmPasswordErr:""}),p=Object(i.a)(h,2),f=p[0],v=p[1],g=function(e){O(Object(C.a)(Object(C.a)({},x),{},Object(S.a)({},e.target.name,e.target.value)))};return Object(w.jsxs)(j.a,{sx:{display:"flex",flexDirection:"row",justifyContent:"center",padding:"8%"},children:[Object(w.jsx)(j.a,{children:Object(w.jsx)(T.a,{children:Object(w.jsxs)(T.a,{sm:10,md:6,sx:{boxShadow:3,maxHeight:"500px",maxWidth:"500px",padding:"4rem"},children:[Object(w.jsx)(u.a,{sx:{textAlign:"center",fontSize:"20px",fontWeight:"bold",marginBottom:"15px"},children:"Enter new password"}),Object(w.jsxs)("form",{onSubmit:function(t){t.preventDefault();var a=x.password;x.confirmPassword;(function(){var e,t=x.password,a=x.confirmPassword;return""===t?(v(Object(S.a)({},"passwordErr","enter password")),!1):t.length<=3?(v(Object(S.a)({},"passwordErr","password should be greater than 3 characters")),!1):t===a||(v((e={},Object(S.a)(e,"passwordErr","password and confirm password must be same"),Object(S.a)(e,"confirmPasswordErr","password and confirm password must be same"),e)),!1)})()&&E.a.post(L,{password:a,id:s,token:l}).then((function(t){t.data.status?(r(!0),setTimeout((function(){e("/admin/login")}),2e3)):alert(t.data.msg)}))},children:[Object(w.jsx)(I,{formLabel:"",label:"password",name:"password",type:"password",helperText:f.passwordErr?f.passwordErr:"",error:!!f.passwordErr,callback:function(e){return g(e)},onFocusCallback:function(){return v(Object(C.a)(Object(C.a)({},f),{},Object(S.a)({},"passwordErr","")))}}),Object(w.jsx)(I,{FormLabel:"",label:"confirm password",name:"confirmPassword",type:"password",helperText:f.confirmPasswordErr?f.confirmPasswordErr:"",error:!!f.confirmPasswordErr,callback:function(e){return g(e)},onFocusCallback:function(){return v(Object(C.a)(Object(C.a)({},f),{},Object(S.a)({},"confirmPasswordErr","")))}}),Object(w.jsx)(j.a,{sx:{display:"flex",justifyContent:"center"},children:Object(w.jsx)(z.a,{type:"submit",variant:"contained",children:"submit"})})]})]})})}),c&&Object(w.jsx)(Z,{text:"Password Reset Successfull",color:"success"})]})},xe=a(364),Oe=a(368),he=a(367),pe=a(363),fe=a(365),me=a(366),ve=a(354);function ge(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(),o=Object(i.a)(r,2),s=o[0],l=o[1],d=Object(g.a)(["jwt","refreshToken"]),j=Object(i.a)(d,3),b=j[0];j[1],j[2];Object(n.useEffect)((function(){E.a.get(_,{headers:{withCredentials:!0,Authorization:"Bearer ".concat(null===b||void 0===b?void 0:b.accessToken)}}).then((function(e){c(e.data)})).catch((function(e){alert(e.msg)}))}),[s]);return Object(w.jsxs)(pe.a,{component:ne.a,children:[Object(w.jsx)(u.a,{variant:"h5",textAlign:"center",sx:{marginTop:"1rem",marginBottom:"2.5rem"},children:"User Management"}),Object(w.jsxs)(xe.a,{sx:{minWidth:650},"aria-label":"simple table",children:[Object(w.jsx)(fe.a,{children:Object(w.jsxs)(me.a,{children:[Object(w.jsx)(he.a,{children:"No"}),Object(w.jsx)(he.a,{align:"left",children:"id"}),Object(w.jsx)(he.a,{align:"left",children:"Name"}),Object(w.jsx)(he.a,{align:"left",children:"Email"}),Object(w.jsx)(he.a,{align:"left",children:"Status"}),Object(w.jsx)(he.a,{align:"left",children:"Blocked"})]})}),Object(w.jsx)(Oe.a,{children:a.map((function(e,t){return Object(w.jsxs)(me.a,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[Object(w.jsx)(he.a,{component:"th",scope:"row",children:t+1}),Object(w.jsx)(he.a,{align:"left",children:e._id}),Object(w.jsx)(he.a,{align:"left",children:e.username}),Object(w.jsx)(he.a,{align:"left",children:e.email}),Object(w.jsx)(he.a,{align:"left",children:e.status?Object(w.jsx)(u.a,{sx:{color:"green",fontWeight:"bold"},children:"active"}):Object(w.jsx)(u.a,{sx:{color:"red",fontWeight:"bold"},children:"blocked"})}),Object(w.jsx)(he.a,{align:"left",children:Object(w.jsx)(ve.a,{defaultChecked:e.status,onChange:function(){return t=e.email,void E.a.post(P,{email:t},{headers:{withCredentials:!0,Authorization:"Bearer ".concat(null===b||void 0===b?void 0:b.accessToken)}}).then((function(){l(!s)})).catch((function(e){console.log(e)}));var t}})})]},e.id)}))})]})]})}var we=a(373),ye=a(374),ke=a(375),Se=a(96),Ce=function(e){var t=e.hotel,a=e.callback,c=e.openfn,r=(e.closefn,e.getIdCallback),o=Object(n.useState)(!1),s=Object(i.a)(o,2),l=s[0],d=s[1],b=Object(n.useState)(!1),x=Object(i.a)(b,2),O=(x[0],x[1]),h=Object(g.a)(),p=Object(i.a)(h,3),f=p[0],v=(p[1],p[2],function(){var e=Object(ae.a)(Object(te.a)().mark((function e(t){return Object(te.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:E.a.put("".concat(q,"/").concat(t),{},{headers:{withCredentials:!0,Authorization:"Bearer ".concat(null===f||void 0===f?void 0:f.accessToken)}}).then((function(e){console.log(e.data),d(e.data.currentStatus.block)})).catch((function(e){alert(e.message)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());Object(n.useEffect)((function(){O(!!l)}),[l]);var y=Object(m.o)();return Object(w.jsxs)(we.a,{children:[Object(w.jsx)(ye.a,{sx:{objectFit:"cover",width:"244px",backgroundColor:"rgba(0, 0, 0, 0.1)",transition:"background-color 0.5s ease-in-out"},component:"img",height:"244",image:null===t||void 0===t?void 0:t.hotelImage[0],alt:"hotelImg",loading:"lazy"}),Object(w.jsxs)(ke.a,{children:[Object(w.jsx)(u.a,{sx:{cursor:"pointer",fontWeight:"bolder"},onClick:function(){return y("")},children:t.name}),Object(w.jsx)(u.a,{marginTop:1,fontSize:14,children:t.city}),Object(w.jsxs)(j.a,{sx:{display:"flex",gap:"10px",paddingTop:"12px"},children:[Object(w.jsx)(z.a,{variant:"outlined",color:"success",onClick:function(){c(),r(t._id)},children:"View"}),Object(w.jsx)(z.a,{variant:"outlined",color:"error",onClick:function(){v(t._id),a()},children:null!==t&&void 0!==t&&t.isBlocked?"unblock":"Block"})]})]}),Object(w.jsx)(Se.Toaster,{position:"top-center",reverseOrder:!1})]})},Ee=a(360),Te=function(e){var t=e.images;return console.log(t),Object(w.jsx)(T.a,{container:!0,spacing:1,children:null===t||void 0===t?void 0:t.map((function(e,t){return Object(w.jsx)(T.a,{item:!0,spacing:2,sx:{width:"15rem",height:"15rem"},children:Object(w.jsx)("img",{loading:"lazy",src:e,style:{width:"100%",height:"100%",objectFit:"cover"}})},t)}))})},ze=function(e){var t=e.id,a=Object(n.useState)({}),c=Object(i.a)(a,2),r=c[0],o=c[1],s=Object(g.a)(),l=Object(i.a)(s,3),d=l[0];l[1],l[2];Object(n.useEffect)((function(){b()}),[]);var b=function(){var e=Object(ae.a)(Object(te.a)().mark((function e(){var a;return Object(te.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.get("".concat(J,"/").concat(t),{headers:{withCredentials:!0,Authorization:"Bearer ".concat(null===d||void 0===d?void 0:d.accessToken)}});case 2:a=e.sent,o(null===a||void 0===a?void 0:a.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)(Ee.a,{maxWidth:"lg",sx:{marginTop:2},children:[Object(w.jsx)(u.a,{fontSize:22,sx:{lineHeight:1.9},children:r.name}),Object(w.jsx)(u.a,{fontSize:14,color:"#484d49",children:"".concat(r.street," ").concat(r.city)}),Object(w.jsx)(u.a,{fontSize:14,color:"#484d49",children:"".concat(r.landmark," pincode: ").concat(r.pincode)}),Object(w.jsx)(u.a,{fontSize:14,color:"#484d49",sx:{marginBottom:3},children:"".concat(r.email," ").concat(r.phone)}),Object(w.jsx)(Te,{images:null===r||void 0===r?void 0:r.hotelImage}),Object(w.jsx)(j.a,{sx:{marginTop:"2rem",padding:"10px"},children:Object(w.jsx)(u.a,{children:null===r||void 0===r?void 0:r.description})}),Object(w.jsxs)(j.a,{children:[Object(w.jsx)(u.a,{variant:"h5",sx:{fontWeight:"bold",marginTop:"10px",marginBottom:"10px"},children:"Rooms"}),(null===r||void 0===r?void 0:r.rooms)&&(null===r||void 0===r?void 0:r.rooms.map((function(e,t){return Object(w.jsxs)(T.a,{children:[Object(w.jsxs)(j.a,{children:[Object(w.jsxs)(u.a,{sx:{fontSize:"18px",fontWeight:"bold",marginTop:"10px",marginBottom:"10px"},children:[Object(w.jsxs)("span",{style:{marginRight:"3px"},children:[t+1,"."]}),null===e||void 0===e?void 0:e.roomType]}),Object(w.jsx)(u.a,{fontSize:14,color:"#484d49",children:null===e||void 0===e?void 0:e.roomDesc}),Object(w.jsxs)(u.a,{fontSize:14,color:"#484d49",sx:{marginBottom:"10px"},children:[Object(w.jsx)("span",{style:{fontSize:"14px",fontWeight:"bold"},children:"Amenities : "}),null===e||void 0===e?void 0:e.amenities]})]}),Object(w.jsx)(Te,{images:e.images})]},t)})))]})]})})},Be=function(e){var t=e.id,a=e.open,n=e.handleClose;return Object(w.jsx)(w.Fragment,{children:Object(w.jsx)(B.a,{open:a,onClose:n,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:Object(w.jsx)(j.a,{sx:Object(C.a)(Object(C.a)({},{width:"80%",maxWidth:"1000px",maxHeight:"95vh",overflowY:"auto",m:"auto",bgcolor:"background.paper",boxShadow:24,p:4}),{},{width:"80%",maxWidth:"none"}),children:Object(w.jsx)(ze,{id:t})})})})},De=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)([]),s=Object(i.a)(o,2),l=s[0],d=s[1],b=Object(n.useState)(""),x=Object(i.a)(b,2),O=x[0],h=x[1],p=Object(n.useState)(!1),f=Object(i.a)(p,2),m=f[0],v=f[1],y=c.a.useState(!1),k=Object(i.a)(y,2),S=k[0],C=k[1],T=Object(g.a)(),z=Object(i.a)(T,3),B=z[0],D=(z[1],z[2],function(){C(!1)}),A=function(){C(!0)};Object(n.useEffect)((function(){I()}),[m]);var I=function(){var e=Object(ae.a)(Object(te.a)().mark((function e(){var t;return Object(te.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.get(M,{headers:{withCredentials:!0,Authorization:"Bearer ".concat(null===B||void 0===B?void 0:B.accessToken)}});case 2:t=e.sent,r(null===t||void 0===t?void 0:t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){W(a)}),[a]);var W=function(){var e=Object(ae.a)(Object(te.a)().mark((function e(t){var a,n;return Object(te.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=t.map(function(){var e=Object(ae.a)(Object(te.a)().mark((function e(t){var a,n;return Object(te.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.get("".concat(U,"/?id=").concat(t._id),{headers:{withCredentials:!0,Authorization:"Bearer ".concat(null===B||void 0===B?void 0:B.accessToken)}});case 2:return n=e.sent,e.abrupt("return",null===n||void 0===n||null===(a=n.data)||void 0===a?void 0:a.hotelData);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=4,Promise.all(a);case 4:n=e.sent,d(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(u.a,{sx:{textAlign:"center",fontWeight:"500",paddingTop:"2.5rem",paddingBottom:"2.5rem"},variant:"h5",children:"Hotels"}),Object(w.jsxs)(j.a,{sx:{display:"flex",gap:"4rem"},children:[l&&l.map((function(e,t){return Object(w.jsx)(Ce,{sx:{},hotel:e,openfn:A,getIdCallback:function(e){return h(e)},closefn:D,callback:function(){return v(!m)}})})),Object(w.jsx)(Be,{id:O,open:S,handleClose:D})]})]})},Ae=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(!1),o=Object(i.a)(r,2),s=o[0],l=o[1],d=Object(n.useState)([]),b=Object(i.a)(d,2),x=b[0],O=b[1],h=Object(n.useState)(!1),p=Object(i.a)(h,2),f=p[0],m=p[1],v=Object(g.a)(["jwt","refreshToken"]),y=Object(i.a)(v,3),k=y[0],S=(y[1],y[2],Object(n.useState)("")),C=Object(i.a)(S,2),T=C[0],B=C[1],D=function(){m(!1)};Object(n.useEffect)((function(){A()}),[s]);var A=function(){var e=Object(ae.a)(Object(te.a)().mark((function e(){var t;return Object(te.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.get(H,{headers:{withCredentials:!0,Authorization:"Bearer ".concat(null===k||void 0===k?void 0:k.accessToken)}});case 2:t=e.sent,c(null===t||void 0===t?void 0:t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){I(a)}),[a]),Object(n.useEffect)((function(){}),[a]);var I=function(){var e=Object(ae.a)(Object(te.a)().mark((function e(t){var a,n;return Object(te.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=t.map(function(){var e=Object(ae.a)(Object(te.a)().mark((function e(t){var a,n;return Object(te.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.get("".concat(U,"/?id=").concat(t._id),{headers:{withCredentials:!0,Authorization:"Bearer ".concat(null===k||void 0===k?void 0:k.accessToken)}});case 2:return n=e.sent,e.abrupt("return",null===n||void 0===n||null===(a=n.data)||void 0===a?void 0:a.hotelData);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=4,Promise.all(a);case 4:n=e.sent,O(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(ae.a)(Object(te.a)().mark((function e(t){return Object(te.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.put("".concat(R,"/").concat(t),{},{headers:{withCredentials:!0,Authorization:"Bearer ".concat(null===k||void 0===k?void 0:k.accessToken)}}).then((function(e){Se.toast.success("Approval successfull"),l(!s)})).catch((function(e){alert(e.message)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(ae.a)(Object(te.a)().mark((function e(t){return Object(te.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure want to reject ?")){e.next=4;break}return e.next=4,E.a.delete("".concat(G,"/").concat(t),{headers:{withCredentials:!0,Authorization:"Bearer ".concat(null===k||void 0===k?void 0:k.accessToken)}}).then((function(e){Se.toast.success("successfully deleted")})).catch((function(e){console.log(e.message),alert(e.message)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return console.log(T),Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)(j.a,{children:[0!=x.length?x.map((function(e,t){return Object(w.jsxs)(j.a,{width:"60%",m:2,display:"flex",flexDirection:"row",justifyContent:"space-between",p:4,sx:{marginX:"auto",backgroundColor:"#f0f0f0",borderRadius:6,boxShadow:"2px 2px 8px #c7c7c7, -2px -2px 8px #ffffff"},children:[Object(w.jsxs)(j.a,{display:"flex",flexDirection:"row",alignItems:"center",children:[Object(w.jsx)("img",{src:null===e||void 0===e?void 0:e.hotelImage[0],alt:"hotelImg",height:"50px",width:"50px"}),Object(w.jsxs)(j.a,{marginLeft:4,children:[Object(w.jsx)(u.a,{variant:"h6",sx:{cursor:"pointer"},onClick:function(){B(e._id),m(!0)},children:e.name}),Object(w.jsx)(u.a,{variant:"caption",children:e.city})]})]}),Object(w.jsxs)(j.a,{children:[Object(w.jsx)(z.a,{size:"medium",variant:"contained",color:"primary",sx:{marginRight:"1rem",padding:"10px"},onClick:function(){return W(e._id)},children:"Approve"}),Object(w.jsx)(z.a,{size:"medium",variant:"contained",color:"error",onClick:function(){return N(e._id)},children:"Reject"})]}),Object(w.jsx)(Be,{id:T,open:f,handleClose:D})]},"")})):Object(w.jsx)(u.a,{variant:"h5",sx:{padding:"10%",paddingLeft:"30rem"},children:"No request to approve"}),Object(w.jsx)(Se.Toaster,{position:"top-center",reverseOrder:!1})]})})};function Ie(){return null!=Object(v.c)((function(e){var t,a;return null===e||void 0===e||null===(t=e.user)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.email}))?Object(w.jsx)(m.b,{}):Object(w.jsx)(m.a,{to:"/admin/login"})}var We=a(196),Ne=a(189),Fe=a(193),Le=a(188),_e=(a(242),a(136)),Pe=(a(245),a(246),a(355)),He=a(341),Re=a(342),Ge=a(185),Me=a.n(Ge),Ue=a(343),qe=a(344);var Je=function(e){var t,a,c,r,o=e.bookingId,s=Object(v.c)((function(e){var t;return null===e||void 0===e||null===(t=e.booking)||void 0===t?void 0:t.bookings})).find((function(e){return e._id==o})),l=Object(n.useState)(s),d=Object(i.a)(l,2),b=d[0];return d[1],console.log(b),Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)(Ee.a,{maxWidth:"lg",sx:{marginTop:2},children:[Object(w.jsx)(u.a,{fontSize:22,sx:{lineHeight:1.9},children:"Booking Details"}),Object(w.jsx)(u.a,{fontSize:22,sx:{lineHeight:1.9,color:"burlywood"},children:b&&(null===b||void 0===b||null===(t=b.hoteldetails)||void 0===t?void 0:t.name)}),Object(w.jsx)(u.a,{fontSize:14,color:"#484d49",children:"".concat(null===b||void 0===b||null===(a=b.hoteldetails)||void 0===a?void 0:a.landmark," pincode: ").concat(null===b||void 0===b||null===(c=b.hoteldetails)||void 0===c?void 0:c.landmark)}),Object(w.jsx)(u.a,{fontSize:18,sx:{lineHeight:1.9},children:"Booked Room:"}),Object(w.jsx)(u.a,{fontSize:16,color:"#484d49",sx:{fontWeight:"bold"},children:null===b||void 0===b?void 0:b.roomDetails.roomType}),Object(w.jsx)(Te,{images:null===b||void 0===b||null===(r=b.roomDetails)||void 0===r?void 0:r.images}),Object(w.jsx)(T.a,{item:!0,xs:12,sm:6,md:8,lg:6,children:Object(w.jsxs)(ke.a,{sx:{display:"flex",flexDirection:"column"},children:[Object(w.jsx)(j.a,{sx:{marginLeft:"1rem",marginBottom:"1rem"},children:Object(w.jsx)(Pe.a,{badgeContent:null===b||void 0===b?void 0:b.status,color:"primary",sx:{backgroundColor:"green"}})}),Object(w.jsxs)(j.a,{sx:{display:"flex",gap:"20px",justifyContent:"flex-start"},children:[Object(w.jsxs)(j.a,{children:[Object(w.jsx)(He.a,{}),Object(w.jsx)(u.a,{variant:"h8",children:null===b||void 0===b?void 0:b.checkInDate})]}),Object(w.jsx)(j.a,{children:Object(w.jsx)(Re.a,{})}),Object(w.jsxs)(j.a,{children:[Object(w.jsx)(He.a,{}),Object(w.jsx)(u.a,{variant:"h8",children:null===b||void 0===b?void 0:b.checkInDate})]})]}),Object(w.jsxs)(j.a,{sx:{display:"flex",gap:"15px"},children:[Object(w.jsxs)(j.a,{sx:{display:"flex",gap:"15px",marginTop:"1rem"},children:[Object(w.jsx)(Ue.a,{}),Object(w.jsx)(u.a,{children:"Rooms:"}),Object(w.jsx)(u.a,{children:null===b||void 0===b?void 0:b.numberOfRooms})]}),Object(w.jsxs)(j.a,{sx:{display:"flex",gap:"15px",marginTop:"1rem"},children:[Object(w.jsx)(qe.a,{}),Object(w.jsx)(u.a,{children:"Guests:"}),Object(w.jsx)(u.a,{children:null===b||void 0===b?void 0:b.guests})]})]}),Object(w.jsxs)(j.a,{sx:{display:"flex",gap:"10px",marginTop:"1rem"},children:[Object(w.jsx)(u.a,{sx:{fontWeight:"bold"},children:"Total Amount:"}),Object(w.jsx)(u.a,{sx:{fontWeight:"bold"},children:null===b||void 0===b?void 0:b.total})]}),Object(w.jsx)(j.a,{sx:{marginTop:"1rem"},children:null!==b&&void 0!==b&&b.bookedBy?Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)(j.a,{sx:{width:"100%",padding:"15px",backgroundColor:"#DBDFEA",borderRadius:"5px"},children:[Object(w.jsx)(u.a,{sx:{fontSize:"14px",fontWeight:"bold"},children:"Booked by:"}),Object(w.jsxs)(j.a,{sx:{display:"flex",gap:"15px"},children:[Object(w.jsx)(u.a,{sx:{fontSize:"14px",fontWeight:"bold"},children:null===b||void 0===b?void 0:b.bookedBy.name}),Object(w.jsxs)(j.a,{sx:{display:"flex",gap:"10px"},children:[Object(w.jsx)(Me.a,{}),Object(w.jsx)(u.a,{sx:{fontSize:"14px"},children:null===b||void 0===b?void 0:b.bookedBy.email})]})]})]})}):""})]})})]})})},Ke={"en-US":a(149)},Ve=Object(_e.c)({format:We.a,parse:Fe.a,startOfWeek:Le.a,getDay:Ne.a,locales:Ke});var Ye=function(){var e=Object(n.useState)({title:"",start:"",end:""}),t=Object(i.a)(e,2),a=(t[0],t[1],Object(n.useState)([])),r=Object(i.a)(a,2),o=r[0],s=r[1],l=Object(n.useState)(_e.b.MONTH),d=Object(i.a)(l,2),b=d[0],u=d[1],x=Object(n.useState)(),O=Object(i.a)(x,2),h=O[0],p=O[1],f=c.a.useState(!1),m=Object(i.a)(f,2),g=m[0],y=m[1],k=Object(v.b)();Object(n.useEffect)((function(){S()}),[]);var S=function(){var e=Object(ae.a)(Object(te.a)().mark((function e(){var t,a,n;return Object(te.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.get(K);case 3:t=e.sent,a=t.data,k({type:"GET_BOOKINGS",payload:a}),n=null===a||void 0===a?void 0:a.map((function(e){var t;return{title:"".concat(null===(t=e.hoteldetails)||void 0===t?void 0:t.name," - ").concat(e._id),start:new Date(e.checkInDate),end:new Date(e.checkInDate)}})),s(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Object(w.jsxs)("div",{className:"App",children:[Object(w.jsx)(_e.a,{localizer:Ve,events:o,startAccessor:"start",endAccessor:"end",style:{height:500,margin:"50px"},view:b,onView:function(e){u(e)},components:{day:{header:function(e){var t=e.date;return Object(w.jsx)("div",{style:{backgroundColor:"lightgray"},children:Ve.format(t,"dddd")})},cell:function(e){var t=e.date,a=e.children;return Object(w.jsxs)("div",{style:{backgroundColor:"lightblue",height:"100%"},children:[Object(w.jsx)("div",{style:{fontWeight:"bold"},children:Ve.format(t,"d")}),Object(w.jsx)("div",{children:a})]})},event:function(e){var t=e.event;return Object(w.jsx)("div",{children:Object(w.jsx)("div",{children:t.title})})}}},onSelectEvent:function(e){var t=e.title.split("-")[1].trim();p(t),y(!0),console.log("Selected event:",e)}}),Object(w.jsx)(B.a,{open:g,onClose:function(){return y(!1)},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:Object(w.jsx)(j.a,{sx:Object(C.a)(Object(C.a)({},{width:"60%",maxWidth:"1000px",maxHeight:"80vh",overflowY:"auto",m:"auto",bgcolor:"background.paper",boxShadow:24,p:4}),{},{width:"60%",maxWidth:"none"}),children:Object(w.jsx)(Je,{bookingId:h})})})]})};function Xe(){return Object(w.jsx)(l.a,{children:Object(w.jsxs)(m.e,{children:[Object(w.jsx)(m.c,{path:"/admin/login",element:Object(w.jsx)($,{}),exact:!0}),Object(w.jsx)(m.c,{path:"/admin/forget/password",element:Object(w.jsx)(ee,{}),exact:!0}),Object(w.jsx)(m.c,{path:"/admin/reset/password/:id/:token",element:Object(w.jsx)(ue,{}),exact:!0}),Object(w.jsxs)(m.c,{element:Object(w.jsx)(Ie,{}),children:[Object(w.jsx)(m.c,{path:"/"}),Object(w.jsx)(m.c,{path:"/admin",element:Object(w.jsx)(k,{props:Object(w.jsx)(be,{})}),exact:!0}),Object(w.jsx)(m.c,{path:"/admin/users",element:Object(w.jsx)(k,{props:Object(w.jsx)(ge,{})}),exact:!0}),Object(w.jsx)(m.c,{path:"/admin/hotels/approve",element:Object(w.jsx)(k,{props:Object(w.jsx)(Ae,{})}),exact:!0}),Object(w.jsx)(m.c,{path:"/admin/hotels",element:Object(w.jsx)(k,{props:Object(w.jsx)(De,{})}),exact:!0}),Object(w.jsx)(m.c,{path:"/admin/bookings",element:Object(w.jsx)(k,{props:Object(w.jsx)(Ye,{})})})]})]})})}var Qe=a(190),Ze=a(61),$e=a(191),et=a(153),tt=a(192),at=a.n(tt),nt=a(21),ct=[],rt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ct,t=arguments.length>1?arguments[1]:void 0;return"GET_BOOKINGS"===t.type?(console.log(t.payload),Object(C.a)(Object(C.a)({},e),{},{bookings:Object(nt.a)(t.payload)})):e},ot={data:{},loggedIn:!1},it=Object(Ze.combineReducers)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADMIN_LOGIN":return Object(C.a)(Object(C.a)({},e),{},{data:Object(C.a)({},t.payload)});case"ADMIN_LOGOUT":return Object(C.a)(Object(C.a)({},e),{},{data:t.payload});default:return e}},booking:rt}),st={key:"root",storage:at.a},lt=Object(et.a)(st,it),dt=[Ze.applyMiddleware.apply(void 0,[])],jt=Object(Ze.compose)($e.composeWithDevTools.apply(void 0,dt)),bt=Object(Ze.createStore)(lt,jt),ut=Object(et.b)(bt),xt=bt;o.a.render(Object(w.jsx)(v.a,{store:xt,children:Object(w.jsx)(Qe.a,{persistor:ut,children:Object(w.jsx)(Xe,{})})}),document.getElementById("root"))}},[[251,1,2]]]);
//# sourceMappingURL=main.511a8b8d.chunk.js.map